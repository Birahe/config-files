"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[5116,4931],{21213:(e,t,o)=>{o.r(t),o.d(t,{ConfigureIntegrationModal:()=>K});var n=o(77094),i=o.n(n),r=o(67294),a=o(480),s=o(81954),l=o(24405),d=o(3779),c=o(5366),u=o(9844),g=o(35794),p=o(9038),h=o(64002),f=o(47307),m=o(64964),v=o(761),b=o(1790),y=o(33929),w=o(27832),M=o(74021),S=o(85057),I=o(64453),k=o(18153),x=o(42922),Z=o(64921),C=o(74194),T=o(68785),U=o(92660),P=o(13490);const B=(0,c.defineMessages)({webhookUrlPlaceholder:{id:"integrations.configureIntegrationModal.webhookUrlInput.placeholder",defaultMessage:"Paste webhook URL",description:"Placeholder text for webhook URL input"},webhookSecretPlaceholder:{id:"integrations.configureIntegrationModal.webhookSecretInput.placeholder",defaultMessage:"Paste secret code",description:"Placeholder text for webhook secret input"},updateButton:{id:"integrations.configureIntegrationModal.submitButton.update",defaultMessage:"Update",description:"Submit button text when updating a webhook subscription"},createButton:{id:"integrations.configureIntegrationModal.submitButton.create",defaultMessage:"Connect",description:"Submit button text when creating a webhook subscription"},errorOccurred:{id:"integrations.configureIntegrationModal.error.dialog",defaultMessage:"Failed to connect {integration}. Please contact support.",description:"Error message when failed to connect integration"}});function K(){var e,t;window.__c={n:"ConfigureIntegrationModal"};const o=(0,a.O7)(),n=(0,l.yK)((e=>({errorText:{color:e.errorText,fontSize:12},input:{display:"flex",flexDirection:"column",alignItems:"flex-start",width:300},helpInfo:{display:"inline-flex",marginLeft:2}})),[]),K=(0,k.useConnectIntegrationModalStyles)(),O=(0,s.VK)((()=>M.Z.state.open?M.Z.state.integrationId:void 0),[]),W=(0,s.VK)((()=>M.Z.state.open?M.Z.state.webhookSubscriptionId:void 0),[]),D=(0,s.VK)((()=>w.default.state.currentSpaceStore),[]),R=O&&D?S.y2.createChildStore(D,{id:O,table:u.K2}):void 0,_=W&&D?S.n4.createChildStore(D,{id:W,table:g.b,spaceId:D.id}):void 0;(0,r.useEffect)((()=>{const{webhookUrl:e,webhookSecret:t}={webhookUrl:(null==_?void 0:_.getWebhookUrl())||"",webhookSecret:(null==_?void 0:_.getWebhookSecret())||""};V(e),F(t)}),[_]);const[E,V]=r.useState(""),[L,F]=r.useState(""),[N,A]=r.useState(!1),[z,q]=r.useState(!1),[H,j]=r.useState(!1),J=(0,s.VK)((()=>{if(R)return R.getModel()}),[R]),G=(0,s.VK)((()=>null==J?void 0:J.getInfo()),[J]),Q=(0,p.RW)(O);if(!J||!G||!Q)return null;const X=e=>{e&&(j(!1),f.showErrorMessage(y.default.formatMessage(B.errorOccurred,{integration:G.developer_name})))},Y=null===(e=Q.info.customization)||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.hmac,$=async()=>{if(!H){if(!(0,h.yn)(E))return A(!0),void j(!1);if(A(!1),Y&&!L)return q(!0),void j(!1);j(!0),await b.E({environment:o,integration:J,webhookUrl:E,webhookSecret:L,webhookSubscriptionId:W,onError:X,onSuccess:()=>m.oV({label:i()(c.FormattedMessage,{id:"configureIntegrationModal.snackbar.title",defaultMessage:"{integrationName} successfully connected to your workspace.",description:"Success message after connecting integration",values:{integrationName:J.name}})})}),await v.pJ({environment:o}),ee()}},ee=()=>{M.Z.setState({open:!1}),V(""),F(""),A(!1),q(!1),j(!1)};return i()(U.Z,{innerStyle:K.modal,requireOnline:!0,modalStore:M.Z,onDismiss:ee,render:()=>i()("div",{style:K.mobileModal},void 0,i()("div",{style:K.innerModal},void 0,i()(Z.Z,{onClick:ee,style:K.cancelButton,hoveredStyle:K.hovered},void 0,d.Z.closeSmall(K.closeIcon)),i()(I.P,{integrationInfo:G,integrationConfig:Q}),i()("div",{style:n.input},void 0,i()(P.Z,{hasMarginTop:!0,style:{display:"flex",alignItems:"center"}},void 0,i()(c.FormattedMessage,{id:"integrations.configureIntegrationModal.webhookUrlInput",defaultMessage:"Webhook URL",description:"Label for the input field that allows users to paste their webhook URL."})),i()(C.Z,{type:"text",style:{padding:"4px 8px"},value:E,onChange:e=>{V(e.target.value),A(!1)},placeholder:y.default.formatMessage(B.webhookUrlPlaceholder),focusInitial:!0,onKeyDown:async e=>{"Enter"===e.key&&await $()}}),N?i()("div",{style:{marginTop:5,...n.errorText}},void 0,i()(c.FormattedMessage,{id:"integrations.configureIntegrationModal.invalidUrl",defaultMessage:"Invalid webhook URL",description:"Error message shown when the user enters an invalid URL."})):null),Q.acceptsSecretToken&&i()("div",{style:n.input},void 0,i()(P.Z,{hasMarginTop:!0,style:{display:"flex",alignItems:"center"}},void 0,i()(c.FormattedMessage,{id:"integrations.configureIntegrationModal.webhookSecretCode",defaultMessage:"Secret code",description:"Label for the input field that allows users to paste their webhook secret code."})),i()(C.Z,{type:"text",value:L,onChange:e=>F(e.target.value),placeholder:y.default.formatMessage(B.webhookSecretPlaceholder),style:{padding:"4px 8px"},focusInitial:!1,onKeyDown:async e=>{"Enter"===e.key&&await $()}}),z?i()("div",{style:{marginTop:5,...n.errorText}},void 0,i()(c.FormattedMessage,{id:"integrations.configureIntegrationModal.invalidSecret",defaultMessage:"Webhook secret is required.",description:"Error message shown when the user enters an invalid secret."})):null),i()(x.Z,{style:K.connect,onClick:$,disabled:""===E||Y&&""===L},void 0,H?i()(T.Z,{}):i()("span",{},void 0,W?y.default.formatMessage(B.updateButton):y.default.formatMessage(B.createButton)))))})}},64453:(e,t,o)=>{o.d(t,{P:()=>c});var n=o(77094),i=o.n(n),r=o(67294),a=o(24405),s=o(5366),l=o(82990),d=o(71669);function c(e){const{integrationInfo:t,integrationConfig:o}=e,n=(0,a.yK)((e=>({integrationIcon:{width:40,height:40},title:{fontWeight:l.Z.fontWeight.medium,marginBottom:2},subTitle:{fontWeight:l.Z.fontWeight.regular,color:e.lightTextColor,marginTop:2}})),[]);return r.createElement(r.Fragment,null,i()("div",{style:n.integrationIcon},void 0,i()(d.Z,{style:n.integrationIcon,src:t.icon})),i()("p",{style:n.title},void 0,i()(s.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationName",defaultMessage:"Connect {integrationName} to Notion",description:"Title for the modal that allows users to configure an integration.",values:{integrationName:t.developer_name||"Unknown"}})),i()("p",{style:n.subTitle},void 0,o.info.tagline))}},18153:(e,t,o)=>{o.r(t),o.d(t,{ConnectOAuthIntegrationModal:()=>k,useConnectIntegrationModalStyles:()=>x});var n=o(77094),i=o.n(n),r=o(67294),a=o(480),s=o(81954),l=o(24405),d=o(3779),c=o(5366),u=o(9844),g=o(9038),p=o(77719),h=o(33929),f=o(27832),m=o(17549),v=o(85057),b=o(64453),y=o(42922),w=o(64921),M=o(68785),S=o(92660);const I=(0,c.defineMessages)({createButton:{id:"integrations.connectOAuthIntegrationModal.submitButton.create",defaultMessage:"Connect",description:"Submit button text when installing a webhook integration via OAuth"}});function k(){window.__c={n:"ConnectOAuthIntegrationModal"};const e=(0,a.O7)(),t=x(),o=(0,s.VK)((()=>m.Z.state.open?m.Z.state.integrationId:void 0),[]),n=(0,s.VK)((()=>f.default.state.currentSpaceStore),[]),l=o&&n?v.y2.createChildStore(n,{id:o,table:u.K2}):void 0,[c,k]=r.useState(!1),Z=(0,s.VK)((()=>{if(l)return l.getModel()}),[l]),C=(0,s.VK)((()=>null==Z?void 0:Z.getInfo()),[Z]),T=(0,g.RW)(o);if(!(Z&&C&&T&&n))return null;const U=async()=>{c||(k(!0),await p.Bb({environment:e,integration:Z,spaceId:n.id,from:"compliance_connected_apps_settings"}),P())},P=()=>{m.Z.setState({open:!1}),k(!1)};return i()(S.Z,{innerStyle:t.modal,requireOnline:!0,modalStore:m.Z,onDismiss:P,render:()=>i()("div",{style:t.mobileModal},void 0,i()("div",{style:t.innerModal},void 0,i()(w.Z,{onClick:P,style:t.cancelButton,hoveredStyle:t.hovered},void 0,d.Z.closeSmall(t.closeIcon)),i()(b.P,{integrationInfo:C,integrationConfig:T}),i()(y.Z,{style:t.connect,onClick:U},void 0,c?i()(M.Z,{}):i()("span",{},void 0,h.default.formatMessage(I.createButton)))))})}function x(){return(0,l.yK)((e=>({modal:{maxWidth:400,padding:24,fontSize:14,textAlign:"center",borderRadius:10},connect:{marginTop:20,width:300},innerStyle:{borderRadius:10},mobileModal:{fontSize:14,textAlign:"center"},innerModal:{padding:"0px 8px",display:"flex",flexDirection:"column",alignItems:"center"},hovered:{background:e.buttonPressedBackground},closeIcon:{width:14,fill:e.mediumTextColor},cancelButton:{position:"absolute",top:"10px",right:"10px",background:e.buttonHoveredBackground,borderRadius:"100%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",zIndex:10}})),[])}},92660:(e,t,o)=>{o.d(t,{Z:()=>l});var n=o(77094),i=o.n(n),r=(o(67294),o(83355)),a=o(22346),s=o(44532);class l extends r.Z{renderComponent(){const{render:e}=this.props,{device:t}=this.environment,o=this.props.modalStore.state;return t.isMobile?i()(s.ZP,{open:o.open,popupType:s.ZP.PopupType.SlideUp,origin:this.props.origin,onDismiss:this.props.onDismiss,render:e,style:this.props.style}):i()(a.Z,{open:o.open,preventHideChildrenWhileOpening:!0,render:e,onDismiss:this.props.onDismiss,style:this.props.style,innerStyle:this.props.innerStyle})}}l.displayName="DefaultPopupOrModal"},74021:(e,t,o)=>{o.d(t,{Z:()=>r});var n=o(49085);class i extends n.default{getInitialState(){return{open:!1}}}const r=new i},17549:(e,t,o)=>{o.d(t,{Z:()=>r});var n=o(49085);class i extends n.default{getInitialState(){return{open:!1}}}const r=new i}}]);