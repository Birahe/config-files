"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[5116],{21213:(e,t,o)=>{o.r(t),o.d(t,{ConfigureIntegrationModal:()=>_});var n=o(97464),i=o.n(n),r=o(77094),a=o.n(r),s=o(67294),l=o(480),d=o(81954),c=o(24405),u=o(3779),g=o(5366),p=o(9844),h=o(35794),f=o(9038),m=o(82990),b=o(64002),w=o(47307),v=o(761),y=o(1790),M=o(33929),k=o(33665),I=o(25464),S=o(27832),x=o(74021),Z=o(85057),U=o(42922),T=o(64921),C=o(71669),P=o(74194),B=o(68785),R=o(58032),E=o(92660),F=o(74523),L=o(13490);const W=(0,g.defineMessages)({webhookUrlPlaceholder:{id:"integrations.configureIntegrationModal.webhookUrlInput.placeholder",defaultMessage:"Paste webhook URL",description:"Placeholder text for webhook URL input"},webhookSecretPlaceholder:{id:"integrations.configureIntegrationModal.webhookSecretInput.placeholder",defaultMessage:"Paste secret code",description:"Placeholder text for webhook secret input"},updateButton:{id:"integrations.configureIntegrationModal.submitButton.update",defaultMessage:"Update",description:"Submit button text when updating a webhook subscription"},createButton:{id:"integrations.configureIntegrationModal.submitButton.create",defaultMessage:"Create",description:"Submit button text when creating a webhook subscription"},errorOccurred:{id:"integrations.configureIntegrationModal.error.dialog",defaultMessage:"Failed to connect {integration}. Please contact support.",description:"Error message when failed to connect integration"}});function _(){var e,t;window.__c={n:"ConfigureIntegrationModal"};const o=(0,l.O7)(),n=(0,c.yK)((e=>({errorText:{color:e.errorText,fontSize:12},modal:{maxWidth:400,padding:24,fontSize:14,textAlign:"center",borderRadius:10},input:{display:"flex",flexDirection:"column",alignItems:"flex-start",width:300},helpInfo:{display:"inline-flex",marginLeft:2},connect:{marginTop:20,width:300},title:{fontWeight:m.Z.fontWeight.medium,marginBottom:2},subTitle:{fontWeight:m.Z.fontWeight.regular,color:e.lightTextColor,marginTop:2},innerStyle:{borderRadius:10},mobileModal:{fontSize:14,textAlign:"center"},innerModal:{padding:"0px 8px",display:"flex",flexDirection:"column",alignItems:"center"},integrationIcon:{width:40,height:40},hovered:{background:e.buttonPressedBackground},closeIcon:{width:14,fill:e.mediumTextColor},cancelButton:{position:"absolute",top:"10px",right:"10px",background:e.buttonHoveredBackground,borderRadius:"100%",width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",zIndex:10}})),[]),r=(0,d.VK)((()=>x.Z.state.open?x.Z.state.integrationId:void 0),[]),_=(0,d.VK)((()=>x.Z.state.open?x.Z.state.webhookSubscriptionId:void 0),[]),D=(0,d.VK)((()=>S.default.state.currentSpaceStore),[]),K=r&&D?Z.y2.createChildStore(D,{id:r,table:p.K2}):void 0,N=_&&D?Z.n4.createChildStore(D,{id:_,table:h.b,spaceId:D.id}):void 0;(0,s.useEffect)((()=>{const{webhookUrl:e,webhookSecret:t}={webhookUrl:(null==N?void 0:N.getWebhookUrl())||"",webhookSecret:(null==N?void 0:N.getWebhookSecret())||""};z(e),q(t)}),[N]);const[O,z]=s.useState(""),[V,q]=s.useState(""),[A,H]=s.useState(!1),[Y,j]=s.useState(!1),[J,G]=s.useState(!1),Q=(0,d.VK)((()=>{if(K)return K.getModel()}),[K]),X=(0,d.VK)((()=>null==Q?void 0:Q.getInfo()),[Q]),$=(0,f.RW)(r);if(!Q||!X||!$)return null;const ee=e=>{e&&(G(!1),w.showErrorMessage(M.default.formatMessage(W.errorOccurred,{integration:X.developer_name})))},te=null===(e=$.info.customization)||void 0===e||null===(t=e.headers)||void 0===t?void 0:t.hmac,oe=async()=>{if(!J){if(!(0,b.yn)(O))return H(!0),void G(!1);if(H(!1),te&&!V)return j(!0),void G(!1);G(!0),await y.E({environment:o,integration:Q,webhookUrl:O,webhookSecret:V,webhookSubscriptionId:_,onError:ee}),await v.pJ({environment:o}),ne()}},ne=()=>{x.Z.setState({open:!1}),z(""),q(""),H(!1),j(!1),G(!1)};return a()(E.Z,{innerStyle:n.modal,requireOnline:!0,modalStore:x.Z,onDismiss:ne,render:()=>a()("div",{style:n.mobileModal},void 0,a()("div",{style:n.innerModal},void 0,a()(T.Z,{onClick:ne,style:n.cancelButton,hoveredStyle:n.hovered},void 0,u.Z.closeSmall(n.closeIcon)),a()("div",{style:n.integrationIcon},void 0,a()(C.Z,{style:n.integrationIcon,src:X.icon})),a()("p",{style:n.title},void 0,a()(g.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationName",defaultMessage:"Connect {integrationName} to Notion",description:"Title for the modal that allows users to configure an integration.",values:{integrationName:X.developer_name||"Unknown"}})),a()("p",{style:n.subTitle},void 0,a()(g.FormattedMessage,{id:"integrations.configureIntegrationModal.integrationTagline",defaultMessage:"{integrationName} is an easy to use, intelligent data leak prevention for SaaS & cloud apps.",description:"Title for the modal that allows users to configure an integration.",values:{integrationName:X.developer_name||"Unknown"}})),a()("div",{style:n.input},void 0,a()(L.Z,{hasMarginTop:!0,style:{display:"flex",alignItems:"center"}},void 0,a()(g.FormattedMessage,{id:"integrations.configureIntegrationModal.webhookUrlInput",defaultMessage:"Webhook URL",description:"Label for the input field that allows users to paste their webhook URL."}),a()(R.Z,{placement:I.u.Bottom,render:e=>s.createElement(F.Z,i()({},e,{href:(0,k.UY)("guides.guides"),analyticsFrom:"workspace_analytics_faq",style:n.helpInfo})),renderTooltip:()=>a()(g.FormattedMessage,{id:"integrations.configureIntegrationModal.webhookUrlInput.tooltip",defaultMessage:"Copy the webhook URL from the partner connection settings page",description:"Tooltip for the input field that allows users to paste their webhook URL."})})),a()(P.Z,{type:"text",style:{padding:"4px 8px"},value:O,onChange:e=>{z(e.target.value),H(!1)},placeholder:M.default.formatMessage(W.webhookUrlPlaceholder),focusInitial:!0,onKeyDown:async e=>{"Enter"===e.key&&await oe()}}),A?a()("div",{style:{marginTop:5,...n.errorText}},void 0,a()(g.FormattedMessage,{id:"integrations.configureIntegrationModal.invalidUrl",defaultMessage:"Invalid webhook URL",description:"Error message shown when the user enters an invalid URL."})):null),a()("div",{style:n.input},void 0,a()(L.Z,{hasMarginTop:!0,style:{display:"flex",alignItems:"center"}},void 0,a()(g.FormattedMessage,{id:"integrations.configureIntegrationModal.webhookSecretCode",defaultMessage:"Secret code",description:"Label for the input field that allows users to paste their webhook secret code."}),a()(R.Z,{placement:I.u.Bottom,render:e=>s.createElement(F.Z,i()({},e,{href:(0,k.UY)("guides.guides"),analyticsFrom:"workspace_analytics_faq",style:n.helpInfo})),renderTooltip:()=>a()(g.FormattedMessage,{id:"integrations.configureIntegrationModal.webhookSecretInput.tooltip",defaultMessage:"Copy the webhook secret from the partner connection settings page",description:"Tooltip for the input field that allows users to paste their webhook secret."})})),a()(P.Z,{type:"text",value:V,onChange:e=>q(e.target.value),placeholder:M.default.formatMessage(W.webhookSecretPlaceholder),style:{padding:"4px 8px"},focusInitial:!1,onKeyDown:async e=>{"Enter"===e.key&&await oe()}}),Y?a()("div",{style:{marginTop:5,...n.errorText}},void 0,a()(g.FormattedMessage,{id:"integrations.configureIntegrationModal.invalidSecret",defaultMessage:"Webhook secret is required.",description:"Error message shown when the user enters an invalid secret."})):null),a()(U.Z,{style:n.connect,onClick:oe,disabled:""===O||te&&""===V},void 0,J?a()(B.Z,{}):a()("span",{},void 0,_?M.default.formatMessage(W.updateButton):M.default.formatMessage(W.createButton)))))})}},92660:(e,t,o)=>{o.d(t,{Z:()=>l});var n=o(77094),i=o.n(n),r=(o(67294),o(83355)),a=o(22346),s=o(44532);class l extends r.Z{renderComponent(){const{render:e}=this.props,{device:t}=this.environment,o=this.props.modalStore.state;return t.isMobile?i()(s.ZP,{open:o.open,popupType:s.ZP.PopupType.SlideUp,origin:this.props.origin,onDismiss:this.props.onDismiss,render:e,style:this.props.style}):i()(a.Z,{open:o.open,preventHideChildrenWhileOpening:!0,render:e,onDismiss:this.props.onDismiss,style:this.props.style,innerStyle:this.props.innerStyle})}}l.displayName="DefaultPopupOrModal"},74021:(e,t,o)=>{o.d(t,{Z:()=>r});var n=o(49085);class i extends n.Z{getInitialState(){return{open:!1}}}const r=new i}}]);